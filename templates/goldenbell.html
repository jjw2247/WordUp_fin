{% extends "navigate.html" %}

{% block title %}ê³¨ë“ ë²¨ - ì˜¤ëŸ‰ì–´í•™ì‚¬ì „{% endblock %}

{% block content %}
<style>
    .goldenbell-container {
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
    }

    .access-container {
        background: white;
        padding: 3rem;
        border-radius: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }

    .access-title {
        font-size: 2rem;
        color: #4F774E;
        margin-bottom: 2rem;
        font-weight: bold;
    }

    .access-input {
        width: 300px;
        padding: 1rem;
        border: 2px solid #E5EFE5;
        border-radius: 10px;
        font-size: 1.2rem;
        text-align: center;
        margin-bottom: 1.5rem;
    }

    .access-input:focus {
        outline: none;
        border-color: #4F774E;
    }

    .access-btn {
        background: #4F774E;
        color: white;
        padding: 1rem 2rem;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .access-btn:hover {
        background: #3d5f3c;
        transform: translateY(-2px);
    }

    .main-content {
        display: none;
    }

    .goldenbell-header {
        margin-bottom: 3rem;
    }

    .goldenbell-title {
        font-size: 3rem;
        background: linear-gradient(45deg, #FFD700, #FFA500);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .goldenbell-subtitle {
        font-size: 1.3rem;
        color: #2E3A29;
        margin-bottom: 2rem;
    }

    .advice-section {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        margin-bottom: 3rem;
        opacity: 0;
        animation: fadeIn 2s ease-in-out forwards;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .advice-title {
        font-size: 1.5rem;
        color: #4F774E;
        margin-bottom: 1rem;
        font-weight: bold;
    }

    .advice-text {
        font-size: 1.1rem;
        color: #2E3A29;
        line-height: 1.8;
    }

    .start-section {
        background: linear-gradient(135deg, #FFD700, #FFA500);
        padding: 3rem;
        border-radius: 20px;
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        margin-bottom: 2rem;
    }

    .start-btn {
        background: white;
        color: #4F774E;
        padding: 1.5rem 3rem;
        border: none;
        border-radius: 15px;
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .start-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .game-container {
        display: none;
        background: white;
        padding: 3rem;
        border-radius: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .player-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .info-input {
        padding: 1rem;
        border: 2px solid #E5EFE5;
        border-radius: 8px;
        font-size: 1rem;
    }

    .info-input:focus {
        outline: none;
        border-color: #4F774E;
    }

    .question-container {
        display: none;
        text-align: left;
    }

    .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }

    .question-number {
        font-size: 1.5rem;
        color: #4F774E;
        font-weight: bold;
    }

    .game-timer {
        font-size: 1.2rem;
        color: #2E3A29;
        font-weight: bold;
    }

    .question-text {
        font-size: 1.3rem;
        color: #2E3A29;
        margin-bottom: 2rem;
        line-height: 1.6;
    }

    .options-container {
        display: grid;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .option-btn {
        background: white;
        border: 2px solid #E5EFE5;
        padding: 1rem;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
    }

    .option-btn:hover {
        border-color: #4F774E;
        background: #F0F5F0;
    }

    .option-btn.selected {
        background: #4F774E;
        color: white;
        border-color: #4F774E;
    }

    .answer-input {
        width: 100%;
        padding: 1rem;
        border: 2px solid #E5EFE5;
        border-radius: 8px;
        font-size: 1.1rem;
        margin-bottom: 2rem;
    }

    .next-btn {
        background: #4F774E;
        color: white;
        padding: 1rem 2rem;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .next-btn:hover {
        background: #3d5f3c;
    }

    .result-container {
        display: none;
        text-align: center;
    }

    .result-title {
        font-size: 2.5rem;
        color: #4F774E;
        margin-bottom: 2rem;
        font-weight: bold;
    }

    .result-score {
        font-size: 3rem;
        background: linear-gradient(45deg, #FFD700, #FFA500);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        font-weight: bold;
    }

    .result-time {
        font-size: 1.5rem;
        color: #2E3A29;
        margin-bottom: 2rem;
    }
</style>

<div class="goldenbell-container">
    <!-- ìš´ì˜ì§„ ì ‘ì† í™•ì¸ -->
    <div class="access-container" id="accessCheck">
        <h2 class="access-title">ğŸ”’ ìš´ì˜ì§„ ì ‘ì† í™•ì¸</h2>
        <p style="color: #2E3A29; margin-bottom: 2rem;">í”„ë¡œí† íƒ€ì… ë²„ì „ì…ë‹ˆë‹¤. ì ‘ì† ì•”í˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
        <input type="password" class="access-input" id="accessPassword" placeholder="ì ‘ì† ì•”í˜¸ ì…ë ¥">
        <br>
        <button class="access-btn" onclick="checkAccess()">ì ‘ì†í•˜ê¸°</button>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="main-content" id="mainContent">
        <div class="goldenbell-header">
            <h1 class="goldenbell-title">ğŸ”” ê³¨ë“ ë²¨</h1>
            <p class="goldenbell-subtitle">ì˜¤ëŸ‰ì–´í•™ì‚¬ì „ê³¼ í•¨ê»˜í•˜ëŠ” ì–´íœ˜ë ¥ í–¥ìƒ í€´ì¦ˆ</p>
        </div>

        <div class="advice-section">
            <h3 class="advice-title">ğŸ’¡ ì–´íœ˜ë ¥ í–¥ìƒì„ ìœ„í•œ ì¡°ì–¸</h3>
            <p class="advice-text">
                "ë‹¨ì–´ëŠ” ìƒê°ì˜ ë„êµ¬ì…ë‹ˆë‹¤. í’ë¶€í•œ ì–´íœ˜ë ¥ì€ ê¹Šì´ ìˆëŠ” ì‚¬ê³ ì™€ ì •í™•í•œ í‘œí˜„ì˜ ê¸°ì´ˆê°€ ë©ë‹ˆë‹¤. 
                ë§¤ì¼ ì¡°ê¸ˆì”©ì´ë¼ë„ ìƒˆë¡œìš´ ë‹¨ì–´ë¥¼ ìµíˆê³ , ê·¸ ë‹¨ì–´ë¥¼ ì‹¤ì œ ë¬¸ì¥ì—ì„œ ì‚¬ìš©í•´ë³´ì„¸ìš”. 
                ë‹¨ìˆœí•œ ì•”ê¸°ë³´ë‹¤ëŠ” ë§¥ë½ ì†ì—ì„œ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
            </p>
        </div>

        <div class="start-section">
            <button class="start-btn" onclick="startGame()">ğŸ”” ê³¨ë“ ë²¨ START</button>
        </div>

        <!-- ê²Œì„ í™”ë©´ -->
        <div class="game-container" id="gameContainer">
            <!-- í”Œë ˆì´ì–´ ì •ë³´ ì…ë ¥ -->
            <div id="playerInfoSection">
                <h3 style="margin-bottom: 2rem; color: #4F774E;">í”Œë ˆì´ì–´ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</h3>
                <div class="player-info">
                    <input type="text" class="info-input" id="playerName" placeholder="ë‹‰ë„¤ì„">
                    <select class="info-input" id="playerSchool">
                        <option value="">í•™êµ ì„ íƒ</option>
                        <option value="ëŒ€ì„±ê³ ë“±í•™êµ">ëŒ€ì„±ê³ ë“±í•™êµ</option>
                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                    </select>
                    <select class="info-input" id="playerClass">
                        <option value="">í•™ê¸‰ ì„ íƒ</option>
                        <option value="1-1">1-1</option>
                        <option value="1-2">1-2</option>
                        <option value="2-1">2-1</option>
                        <option value="2-2">2-2</option>
                        <option value="3-1">3-1</option>
                        <option value="3-2">3-2</option>
                    </select>
                </div>
                <button class="next-btn" onclick="startQuiz()">ê²Œì„ ì‹œì‘</button>
            </div>

            <!-- ë¬¸ì œ í™”ë©´ -->
            <div class="question-container" id="questionContainer">
                <div class="question-header">
                    <div class="question-number" id="questionNumber">1/20</div>
                    <div class="game-timer" id="gameTimer">00:00</div>
                </div>
                
                <div class="question-text" id="questionText">ë¬¸ì œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                
                <div class="options-container" id="optionsContainer">
                    <!-- ê°ê´€ì‹ ì„ íƒì§€ë“¤ -->
                </div>
                
                <input type="text" class="answer-input" id="answerInput" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" style="display: none;">
                
                <button class="next-btn" onclick="nextQuestion()">ë‹¤ìŒ ë¬¸ì œ</button>
            </div>

            <!-- ê²°ê³¼ í™”ë©´ -->
            <div class="result-container" id="resultContainer">
                <h2 class="result-title">ğŸ‰ ê²Œì„ ì™„ë£Œ!</h2>
                <div class="result-score" id="finalScore">0ì </div>
                <div class="result-time" id="finalTime">ì†Œìš” ì‹œê°„: 00:00</div>
                <button class="next-btn" onclick="restartGame()">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
            </div>
        </div>
    </div>
</div>

<script>
    let currentQuestion = 0;
    let score = 0;
    let gameStartTime;
    let gameTimer;

    const questions = [
        // 1-15ë²ˆ: ê°ê´€ì‹
        {
            type: 'multiple',
            question: 'ë‹¤ìŒ ì¤‘ "ì—­ì„¤"ì˜ ì˜ë¯¸ë¡œ ì˜¬ë°”ë¥¸ ê²ƒì€?',
            options: [
                'ê²‰ë³´ê¸°ì—ëŠ” ëª¨ìˆœë˜ì–´ ë³´ì´ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì§„ë¦¬ë¥¼ ë‹´ê³  ìˆëŠ” í‘œí˜„',
                'ì‚¬ì‹¤ê³¼ ë‹¤ë¥¸ ê±°ì§“ëœ ë‚´ìš©',
                'ë…¼ë¦¬ì ìœ¼ë¡œ ì™„ë²½í•œ ì„¤ëª…',
                'ê°ì •ì ì¸ í‘œí˜„ ë°©ë²•',
                'ê³¼ì¥ëœ ìˆ˜ì‚¬ë²•'
            ],
            answer: 0
        },
        // ... ë” ë§ì€ ë¬¸ì œë“¤ (ì˜ˆì‹œë¡œ ëª‡ ê°œë§Œ)
        {
            type: 'multiple',
            question: '"í•¨ì¶•"ì˜ ì˜ë¯¸ëŠ”?',
            options: [
                'ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚´ëŠ” ê²ƒ',
                'ê²‰ìœ¼ë¡œ ë“œëŸ¬ë‚´ì§€ ì•Šê³  ì†ì— ê°„ì§í•˜ì—¬ í¬í•¨í•¨',
                'ê³¼ì¥í•˜ì—¬ í‘œí˜„í•˜ëŠ” ê²ƒ',
                'ë°˜ë³µí•˜ì—¬ ê°•ì¡°í•˜ëŠ” ê²ƒ',
                'ë¹„êµí•˜ì—¬ ì„¤ëª…í•˜ëŠ” ê²ƒ'
            ],
            answer: 1
        }
    ];

    // 16-20ë²ˆ: ì„œë‹µí˜• ë¬¸ì œë“¤ ì¶”ê°€
    for (let i = 16; i <= 20; i++) {
        questions.push({
            type: 'short',
            question: `ë‹¤ìŒ ì„¤ëª…ì— í•´ë‹¹í•˜ëŠ” ë‹¨ì–´ë¥¼ ì“°ì‹œì˜¤. (${i}ë²ˆ ë¬¸ì œ ì˜ˆì‹œ)`,
            answer: 'ì˜ˆì‹œë‹µì•ˆ'
        });
    }

    function checkAccess() {
        const password = document.getElementById('accessPassword').value;
        if (password === '11000') {
            document.getElementById('accessCheck').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        } else {
            alert('ì˜ëª»ëœ ì•”í˜¸ì…ë‹ˆë‹¤.');
        }
    }

    function startGame() {
        document.querySelector('.start-section').style.display = 'none';
        document.getElementById('gameContainer').style.display = 'block';
    }

    function startQuiz() {
        const name = document.getElementById('playerName').value;
        const school = document.getElementById('playerSchool').value;
        const playerClass = document.getElementById('playerClass').value;

        if (!name || !school || !playerClass) {
            alert('ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        document.getElementById('playerInfoSection').style.display = 'none';
        document.getElementById('questionContainer').style.display = 'block';
        
        gameStartTime = Date.now();
        gameTimer = setInterval(updateGameTimer, 1000);
        
        showQuestion();
    }

    function showQuestion() {
        const question = questions[currentQuestion];
        document.getElementById('questionNumber').textContent = `${currentQuestion + 1}/20`;
        document.getElementById('questionText').textContent = question.question;

        const optionsContainer = document.getElementById('optionsContainer');
        const answerInput = document.getElementById('answerInput');

        if (question.type === 'multiple') {
            optionsContainer.style.display = 'grid';
            answerInput.style.display = 'none';
            
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = `${index + 1}. ${option}`;
                btn.onclick = () => selectOption(btn, index);
                optionsContainer.appendChild(btn);
            });
        } else {
            optionsContainer.style.display = 'none';
            answerInput.style.display = 'block';
            answerInput.value = '';
        }
    }

    function selectOption(btn, index) {
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        btn.dataset.selected = index;
    }

    function nextQuestion() {
        const question = questions[currentQuestion];
        let isCorrect = false;

        if (question.type === 'multiple') {
            const selected = document.querySelector('.option-btn.selected');
            if (selected) {
                isCorrect = parseInt(selected.dataset.selected) === question.answer;
            }
        } else {
            const answer = document.getElementById('answerInput').value.trim();
            isCorrect = answer === question.answer;
        }

        if (isCorrect) {
            score += 5;
        }

        currentQuestion++;

        if (currentQuestion >= 20) {
            endGame();
        } else {
            showQuestion();
        }
    }

    function updateGameTimer() {
        const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        
        document.getElementById('gameTimer').textContent = 
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    function endGame() {
        clearInterval(gameTimer);
        
        document.getElementById('questionContainer').style.display = 'none';
        document.getElementById('resultContainer').style.display = 'block';
        
        document.getElementById('finalScore').textContent = `${score}ì `;
        document.getElementById('finalTime').textContent = `ì†Œìš” ì‹œê°„: ${document.getElementById('gameTimer').textContent}`;
    }

    function restartGame() {
        currentQuestion = 0;
        score = 0;
        
        document.getElementById('resultContainer').style.display = 'none';
        document.getElementById('playerInfoSection').style.display = 'block';
        
        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
        document.getElementById('playerName').value = '';
        document.getElementById('playerSchool').value = '';
        document.getElementById('playerClass').value = '';
    }
</script>
{% endblock %}
